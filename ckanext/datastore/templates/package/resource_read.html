{% ckan_extends %}

{% block resource_additional_information_inner %}
  {% if res.datastore_active %}
    <section class="module data-dictionary">
      {% set ddict=h.datastore_dictionary(res.id) %}
      <div class="module-content">
        <h2>
          {{ _('Data Dictionary') }}
          <a class="btn btn-primary btn-small" href="/datastore/dictionary_download/{{res.id}}">Download</a>
        </h2>
        <table class="table table-striped table-bordered table-condensed" data-module="table-toggle-more">
          <thead>
            <tr>
              <th scope="col">{{ _('Column') }}</th>
              <th scope="col" width="100px">{{ _('Type') }}</th>
              <th scope="col">{{ _('Label') }}</th>
              <th scope="col">{{ _('Description') }}</th>
            </tr>
          </thead>
          {% for f in ddict %}
            <tr {% if loop.index > 5 %}class="toggle-more"{% endif %}>
              <td>{{ f.id }}</td>
              <td>{{ f.type }}</td>
              <td>{{ f.get('info', {}).label }}</td>
              <td>{{ h.render_markdown(f.get('info', {}).notes) }}</td>
            </tr>
          {% endfor %}
        </table>
      </div>
    </section>
  {% endif %}
  {{ super() }}
{% endblock %}
